<img align="right" role="right" height="96" src="https://github.com/git2RDFLab/.github/blob/main/profile/images/GitLotus-logo.png?raw=true" style="height: 96px;" title="GitLotus" alt="GitLotus"/>

# GitLotus Component: Prototype for scheduling conversion of Git repositories to RDF files

## Dependency notice

To remove duplicate database [JPA](https://spring.io/projects/spring-data-jpa) definitions, a shared database commons project was introduced, which is used
in all projects, that share the mentioned JPA entities and logic.
The project can be found at: https://github.com/git2RDFLab/database-shared-common

In order to compile this project you have to pull the shared database common project and install the maven artifact locally as a dependency, so this project can find the necessary dependency.

```sh
mvn clean install
```

The database shared common dependency is already included in this project as a dependency in the pom with

```xml
<dependency>
	<groupId>de.leipzig.htwk.gitrdf.database</groupId>
	<artifactId>common</artifactId>
	<version>${de.leipzig.htwk.gitrdf.database.common.version}</version>
</dependency>
```

## Environment Variables

| Environment Variables                        | Description                                                                                                                                                                                                                                                                                                                                 |
|----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SPRING_DATASOURCE_URL                        | The fully qualified URL to the database. Expects the database connection string as of the defined schema by the used database. This project expects per default a PostgreSQL database. A default value is given for local deployments.                                                                                                       |
| SPRING_DATASOURCE_PASSWORD                   | The password of the database. A default value is given for local deployments.                                                                                                                                                                                                                                                               |
| WORKER_TASK_RDFGITREPO_ENABLED               | Whether the scheduler, which is responsible for converting Git repos to rdf files, should be enabled. The default is true.                                                                                                                                                                                                                      |
| WORKER_TASK_RDFGITHUBREPO_ENABLED            | Whether the scheduler, which is responsible for converting GitHub repos to rdf files, should be enabled. The default is true.                                                                                                                                                                                                                   |
| GITHUB_LOGIN_KEY                             | The private pem-base64-key generated by your GitHub app. Env-Var should only contain the base64. Remove the Key-Type declarations and line breaks. Will be used to sign JWT tokens. [More information](https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/managing-private-keys-for-github-apps). |
| GITHUB_LOGIN_APP_ID                          | The ID of your GitHub app, which you use for authentication to GitHub. The ID can be retrieved from the user -> settings -> developer settings -> (GitHub app) menu. [More information](https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/generating-a-json-web-token-jwt-for-a-github-app).     |
| GITHUB_LOGIN_APP_INSTALLATION_ID             | The installation ID of your GitHub app, which you use for authentication to GitHub. The id can be retrieved for example via 'GET /users/{username}/installation'. [More information](https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/authenticating-as-a-github-app-installation).             |
| GITHUB_LOGIN_SYSTEM_USER_NAME                | Your GitHub login username. Is used in combination with your personal access token to pull Git repositories from GitHub.                                                                                                                                                                                                                           |
| GITHUB_LOGIN_SYSTEM_USER_PERSONALACCESSTOKEN | A personal access token for your GitHub user. Is used in combination with your username to pull Git repositories from GitHub.                                                                                                                                                                                                                      |

[Spring Initializr Template](https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.2.2&packaging=jar&jvmVersion=21&groupId=de.leipzig.htwk.gitrdf&artifactId=worker&name=worker&description=Archetype%20project%20for%20HTWK%20Leipzig%20-%20Project%20to%20transform%20git%20to%20RDF&packageName=de.leipzig.htwk.gitrdf.worker&dependencies=lombok,devtools,data-jpa,postgresql,testcontainers,integration)

[New Spring Initializr Template](https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.2.2&packaging=jar&jvmVersion=21&groupId=de.leipzig.htwk.gitrdf&artifactId=worker&name=worker&description=Archetype%20project%20for%20HTWK%20Leipzig%20-%20Project%20to%20transform%20git%20to%20RDF&packageName=de.leipzig.htwk.gitrdf.worker&dependencies=lombok,devtools,data-jpa,postgresql,testcontainers,integration,flyway)
