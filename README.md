# Prototype for scheduling conversion of git repositories to rdf files

## Dependency notice

In order to remove duplicate database jpa definitions, a shared database commons project was introduced, which is used
in all projects, that share the mentioned jpa entities and logic.
The project can be found under: https://github.com/git2RDFLab/database-shared-common

In order to compile this project you have to pull the shared database common project and install the maven artifact locally
(via: `mvn clean install`) as dependency, so this project can find the necessary dependency.

The database shared common dependency is already included in this project as a dependency in the pom with

```
<dependency>
	<groupId>de.leipzig.htwk.gitrdf.database</groupId>
	<artifactId>common</artifactId>
	<version>${de.leipzig.htwk.gitrdf.database.common.version}</version>
</dependency>
```

## Environment Variables

| Environment Variables                        | Description                                                                                                                                                                                                                                                                                                                                 |
|----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SPRING_DATASOURCE_URL                        | The fully qualified url to the database. Expects the database connection string as of the defined schema by the used database. This projects expects per default a postgres database. A default value is given for local deployments.                                                                                                       |
| SPRING_DATASOURCE_PASSWORD                   | The password of the database. A default value is given for local deployments.                                                                                                                                                                                                                                                               |
| WORKER_TASK_RDFGITREPO_ENABLED               | Whether the scheduler, which is responsible for converting git repos to rdf files, should be enabled. Default is true.                                                                                                                                                                                                                      |
| WORKER_TASK_RDFGITHUBREPO_ENABLED            | Whether the scheduler, which is responsible for converting github repos to rdf files, should be enabled. Default is true.                                                                                                                                                                                                                   |
| GITHUB_LOGIN_KEY                             | The private pem-base64-key generated by your github app. Env-Var should only contain the base64. Remove the Key-Type declarations and line breaks. Will be used to sign jwt tokens. For more information see 'https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/managing-private-keys-for-github-apps'. |
| GITHUB_LOGIN_APP_ID                          | The id of your github app, which you use for authentication to github. The id can be retrieved from the user -> settings -> developer settings -> (github app) menu. For more information see 'https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/generating-a-json-web-token-jwt-for-a-github-app'.     |
| GITHUB_LOGIN_APP_INSTALLATION_ID             | The installation id of your github app, which you use for authentication to github. The id can be retrieved for example via 'GET /users/{username}/installation'. For more information see 'https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/authenticating-as-a-github-app-installation'.             |
| GITHUB_LOGIN_SYSTEM_USER_NAME                | Your github login username. Is used in combination with your personal access token to pull git repos from github.                                                                                                                                                                                                                           |
| GITHUB_LOGIN_SYSTEM_USER_PERSONALACCESSTOKEN | A personal access token for your github user. Is used in combination with your username to pull git repos from github.                                                                                                                                                                                                                      |

## Spring Initializr Template
https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.2.2&packaging=jar&jvmVersion=21&groupId=de.leipzig.htwk.gitrdf&artifactId=worker&name=worker&description=Archetype%20project%20for%20HTWK%20Leipzig%20-%20Project%20to%20transform%20git%20to%20RDF&packageName=de.leipzig.htwk.gitrdf.worker&dependencies=lombok,devtools,data-jpa,postgresql,testcontainers,integration

## New Spring Initializr Template
https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.2.2&packaging=jar&jvmVersion=21&groupId=de.leipzig.htwk.gitrdf&artifactId=worker&name=worker&description=Archetype%20project%20for%20HTWK%20Leipzig%20-%20Project%20to%20transform%20git%20to%20RDF&packageName=de.leipzig.htwk.gitrdf.worker&dependencies=lombok,devtools,data-jpa,postgresql,testcontainers,integration,flyway
